<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>High Score</title>
    <link rel="apple-touch-icon" sizes="180x180" href="img/icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="img/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="img/icons/favicon-16x16.png">
    <link rel="manifest" href="img/icons/site.webmanifest">
    <link rel="mask-icon" href="img/icons/safari-pinned-tab.svg" color="#1f4476">
    <link rel="shortcut icon" href="img/icons/favicon.ico">
    <meta name="msapplication-TileColor" content="#e7e6e8">
    <meta name="msapplication-config" content="img/icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta property="og:title" content="Pop-A-Shot High Score">
    <meta property="og:image" content="https://popashot.johnshaida.com/img/social-sharing.jpg">
    <meta property="og:description" content="List of high scores for Pop-A-Shot">
    <meta property="og:url" content="https://popashot.johnshaida.com">
    <meta name="twitter:card" content="summary_large_image">
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <div class="leaderboard">
      <img src="img/pop-a-shot-logo.svg" alt="Pop-A-Shot logo" scale="0">
      <h1>RUSHBROOK<br>HIGH SCORES</h1>
      <ol id="list">
      </ol>
    </div>
      <a href="https://docs.google.com/forms/d/e/1FAIpQLSdq0xUuGqcft9YIZvJA0Xxub4cIxZpZIzo9iHvkRnrlrGw6hg/viewform?usp=sf_link" class="button" target="_blank">Submit New Score</a>
  </body>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.1.0/papaparse.min.js"></script>
  <script type="text/javascript">
    var public_spreadsheet_url = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vTS9wWd--YWmT3gW5R_9_yiPV37vuz2Z3LUqbtlRTapl6eTnBw1UhZfu_DSyDwh9GX8xWu5fuU9HmFW/pub?gid=0&single=true&output=csv';

    function init() {
      Papa.parse(public_spreadsheet_url, {
        download: true,
        header: true,
        complete: showInfo
      })
    }

    window.addEventListener('DOMContentLoaded', init)

    function showInfo(results) {
      var data = results.data;
      data.forEach(function (item, index) {
        if (item.Name != "blank") {
          document.getElementById("list").innerHTML += '<li><mark>' + item.Name + ' <span style="font-size: 0.7rem;">(' + item.Timestamp + ')</span></mark><small>' + item.Score + '</small></li>';
        }
      });
    }
  </script>
</html>